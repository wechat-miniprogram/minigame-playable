{"version":3,"sources":["file:///Users/yuanzimin/Downloads/cocos-example-ball-master/assets/script/game/update-value-label.ts"],"names":["_decorator","Label","ccclass","property","UpdateValueLabel","isPlaying","startVal","endVal","diffVal","currTime","changingTime","start","playUpdateValue","string","toString","update","dt","currVal","parseInt"],"mappings":";;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAA6BC,MAAAA,K,OAAAA,K;;;;;;;;;OAChC;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBH,U;;kCAGjBI,gB,WADZF,OAAO,CAAC,kBAAD,C,gBAAR,MACaE,gBADb,SACsCH,KADtC,CAC4C;AAAA;AAAA;AAAA,eACxCI,SADwC,GAC5B,KAD4B;AAAA,eAExCC,QAFwC,GAE7B,CAF6B;AAAA,eAGxCC,MAHwC,GAG/B,CAH+B;AAAA,eAIxCC,OAJwC,GAI9B,CAJ8B;AAAA,eAKxCC,QALwC,GAK7B,CAL6B;AAAA,eAMxCC,YANwC,GAMzB,CANyB;AAAA;;AAQxCC,QAAAA,KAAK,GAAG,CACJ;AACH;;AAEDC,QAAAA,eAAe,CAACN,QAAD,EAAmBC,MAAnB,EAAmCG,YAAnC,EAAyD;AACpE,eAAKJ,QAAL,GAAgBA,QAAhB;AACA,eAAKC,MAAL,GAAcA,MAAd;AAEA,eAAKC,OAAL,GAAe,KAAKD,MAAL,GAAc,KAAKD,QAAlC;AAEA,eAAKG,QAAL,GAAgB,CAAhB;AACA,eAAKC,YAAL,GAAoBA,YAApB;AAEA,eAAKG,MAAL,GAAcP,QAAQ,CAACQ,QAAT,EAAd;AAEA,eAAKT,SAAL,GAAiB,IAAjB;AACH;;AAEDU,QAAAA,MAAM,CAACC,EAAD,EAAK;AACP,cAAI,CAAC,KAAKX,SAAV,EAAqB;AACjB;AACH;;AAED,cAAI,KAAKI,QAAL,GAAgB,KAAKC,YAAzB,EAAuC;AACnC,iBAAKD,QAAL,IAAiBO,EAAjB;AAEA,gBAAIC,OAAO,GAAG,KAAKX,QAAL,GAAgBY,QAAQ,CAAC,CAAC,KAAKT,QAAL,GAAgB,KAAKC,YAArB,GAAoC,KAAKF,OAA1C,EAAmDM,QAAnD,EAAD,CAAtC;;AACA,gBAAIG,OAAO,GAAG,KAAKX,QAAnB,EAA6B;AACzBW,cAAAA,OAAO,GAAG,KAAKX,QAAf;AACH,aAFD,MAEO,IAAIW,OAAO,GAAG,KAAKV,MAAnB,EAA2B;AAC9BU,cAAAA,OAAO,GAAG,KAAKV,MAAf;AACH;;AAED,iBAAKM,MAAL,QAAiBI,OAAjB;AACA;AACH;;AAED,eAAKJ,MAAL,QAAiB,KAAKN,MAAtB;AACA,eAAKF,SAAL,GAAiB,KAAjB;AAEH;;AAhDuC,O","sourcesContent":["import { _decorator, Component, Node, Label } from \"cc\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"UpdateValueLabel\")\nexport class UpdateValueLabel extends Label {\n    isPlaying = false;\n    startVal = 0;\n    endVal = 0;\n    diffVal = 0;\n    currTime = 0;\n    changingTime = 0;\n\n    start() {\n        // Your initialization goes here.\n    }\n\n    playUpdateValue(startVal: number, endVal: number, changingTime: number) {\n        this.startVal = startVal;\n        this.endVal = endVal;\n\n        this.diffVal = this.endVal - this.startVal;\n\n        this.currTime = 0;\n        this.changingTime = changingTime;\n\n        this.string = startVal.toString();\n\n        this.isPlaying = true;\n    }\n\n    update(dt) {\n        if (!this.isPlaying) {\n            return;\n        }\n\n        if (this.currTime < this.changingTime) {\n            this.currTime += dt;\n\n            var currVal = this.startVal + parseInt((this.currTime / this.changingTime * this.diffVal).toString());\n            if (currVal < this.startVal) {\n                currVal = this.startVal;\n            } else if (currVal > this.endVal) {\n                currVal = this.endVal;\n            }\n\n            this.string = `${currVal}`;\n            return;\n        }\n\n        this.string = `${this.endVal}`;\n        this.isPlaying = false;\n\n    }\n}\n"]}