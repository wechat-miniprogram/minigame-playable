{"version":3,"sources":["file:///Users/yuanzimin/Files/minigame-playable/demos/cocoscreator3-ball/assets/script/game/page-result.ts"],"names":["_decorator","Component","Node","Constants","UpdateValueLabel","Revive","ccclass","property","PageResult","type","targetProgress","init","scoreLabel","playUpdateValue","isPlaying","onEnable","game","node","on","GAME_EVENT","HIDETIPS","hideTips","ADDSCORE","addScore","DYING","gameDie","showTips","showResult","start","reviveComp","result","getComponent","pageResult","onDisable","off","score","curProgress","Number","string","show","nodeTips1","active","nodeTips2","isShow"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node } from \"cc\";\nimport { Constants } from \"../data/constants\";\nimport { UpdateValueLabel } from \"./update-value-label\";\nimport { Revive } from \"./revive\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"PageResult\")\nexport class PageResult extends Component {\n    @property({ type: UpdateValueLabel })\n    scoreLabel: UpdateValueLabel = null!;\n    targetProgress: number = 0;\n\n    @property(Node)\n    nodeTips1: Node = null!;\n\n    @property(Node)\n    nodeTips2: Node = null!;\n\n    @property(Node)\n    result: Node = null!;\n\n    init() {\n        this.targetProgress = 0;\n        this.scoreLabel.playUpdateValue(this.targetProgress, this.targetProgress, 0);\n        this.scoreLabel.isPlaying = false;\n\n    }\n\n    onEnable() {\n        Constants.game.node.on(Constants.GAME_EVENT.HIDETIPS, this.hideTips, this);\n        Constants.game.node.on(Constants.GAME_EVENT.ADDSCORE, this.addScore, this);\n        Constants.game.node.on(Constants.GAME_EVENT.DYING, this.gameDie, this);\n\n        this.showTips(true);\n        this.showResult(false);\n        this.init();\n    }\n\n    start(){\n        const reviveComp = this.result.getComponent(Revive)!;\n        reviveComp.pageResult = this;\n    }\n\n    onDisable() {\n        Constants.game.node.off(Constants.GAME_EVENT.HIDETIPS, this.hideTips, this);\n        Constants.game.node.off(Constants.GAME_EVENT.ADDSCORE, this.addScore, this);\n    }\n\n    addScore(score: number) {\n        this.targetProgress = score;\n        let curProgress = Number(this.scoreLabel.string);\n        this.scoreLabel.playUpdateValue(curProgress, this.targetProgress, (this.targetProgress - curProgress) / 20);\n    }\n\n    gameDie(){\n        this.showTips(false);\n        this.showResult(true);\n    }\n\n    showTips(show: boolean){\n        this.nodeTips1.active = show;\n        this.nodeTips2.active = show;\n    }\n\n    hideTips(){\n        this.showTips(false);\n    }\n\n    showResult(isShow: boolean){\n        this.result.active = isShow;\n    }\n}\n"]}